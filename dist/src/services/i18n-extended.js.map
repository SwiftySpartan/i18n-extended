{"version":3,"file":"i18n-extended.js","sourceRoot":"","sources":["../../../src/services/i18n-extended.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable, Inject, Optional, InjectionToken } from '@angular/core';\n\ndeclare const require: any;\n\nexport const I18N_EXTENDED_DATA = new InjectionToken<string>('I18N_EXTENDED_DATA');\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class i18nExtended {\n  private language: string = 'en';\n  private files: [string];\n\n  constructor(@Inject(I18N_EXTENDED_DATA) @Optional() public i18nData?: any) {\n    if (!this.files) {\n      this.files = this.i18nData();\n    }\n  }\n\n  private getTranslationFile() {\n    return this.files.filter((item:string) => item.includes(`target-language=\"${this.language}\"`))[0];\n  }\n\n  public setLanguage(langCode: string) {\n    this.language = langCode;\n  }\n\n  public translateText(text: string) {\n    let translatedString = text;\n    const file = this.getTranslationFile() as string;\n    if (!file) {\n      return translatedString;\n    }\n    const parseString = require('xml2js').parseString;\n    parseString(file, (err: any, result: any) => {\n      if (err) {\n        console.error(err);\n        return translatedString;\n      }\n      const list = result.xliff.file[0].body[0]['trans-unit'] as Array<any>;\n      let translation = [];\n      translation = list.filter(item => {\n        return item.source[0] === text;\n      });\n\n      if (translation.length === 0) {\n        translation = list.filter(item => {\n          return item.source[0].toLowerCase() === text.toLowerCase();\n        });\n      }\n\n      if (translation.length === 0) {\n        for (let item of list) {\n          if (text.includes(item.source[0])) {\n            translatedString = item.target[0] +  text.split(item.source[0])[1];\n          }\n        }\n      }\n\n      if (translation && translation.length > 0) {\n        translatedString = translation[0].target[0];\n      }\n    });\n    return translatedString;\n  }\n}\n"]}